\subsubsection{Irradiance}
\label{Irradiance}
~\\
First of all, the irradiance $F$ of the light from the sun falling at the top of the atmosphere of Mars can be calculated as following :
Conservation of energy :
\begin{equation}
\label{eq:conservation of energy}
4\pi R_\odot^2F_\odot=4\pi R^2F
\end{equation}
with 

$R_\odot=6,956.10^8\ m$ : solar radius

$F_\odot=6,45.10^7\ W.m^{-2}$ : energy flow of the surface of the sun

$R \in [2.06644,\ 2.49228].10^{11} \ m$ : distance Mars-Sun (Aphelion and Perihelion)

\begin{equation}
\label{eq:Irradiance Sun range}
F = F_\odot \left(\frac{R_\odot}{R}\right)^2 \in [502, 730]\ W/m^2
\end{equation}

In this report, we will consider that the rover is working on a specific date and we will chose the one when $R$ corresponds to the semi-major axis. In this case $R=2,27936.10^{11}\ km$ and
\begin{equation}
\label{eq:Irradiance Sun}
F = 589\ W/m^2
\end{equation}



Moreover, we can assume that a part of the irradiance is absorbed by the atmosphere. Knowing that the atmosphere of Earth absorbs and scatters to space around 30\% of the incident irradiance of the Sun\cite{yamamoto1962direct}, and knowing  that the atmosphere of Mars is thinner than the one of the Earth (150 times less dense), we will postulate that 10\% of the incident irradiance is absorbed. Thus, using \eqref{eq:Irradiance Sun} the actual irradiance $F_a$ of the light from the sun falling on the surface of Mars is

\begin{equation}
\label{eq:Actual Irradiance Sun}
F_a = \frac{90}{100}F = \frac{90*589}{100} = 530\ W/m^2
\end{equation}

However, this irradiance is the one of surface exposed perpendicular to the sun's beams. As Mars is a sphere, the projection need to be considered.
Knowing that the weather is better into the northern hemisphere of Mars (\ref{climate}) and the fact that a latitude between 30 an 70 degrees is favored for a landing\cite{latitude}, we will assume that the rover has a latitude of 50\textdegree. This latitude corresponds to an angle of 40\textdegree$\ $between the surface of Mars and the sun's beams. Moreover, suppose that the rover stop working when this angle is inferior to 10\textdegree. Thus, the irradiance $F_{50}$ at a latitude of 50\textdegree$\ $is

\begin{equation}
F_{50} = F_a\sin(angleBeams) \in [92, 341] \ W/m^2
\end{equation}

with $angleBeams = [10, 90-latitude] = [10, 40]$\textdegree.

\subsubsection{Target's Radiance}
~\\
Considering the trajectory of the Sun into the sky of Mars and knowing that the rock target is more or less vertical to the surface of Mars, the angle $\theta$ between the target's normal and the sun's beam is considered to be included in $[10, 50]$\textdegree. In addition, in the optimal case (when all the optimal conditions are provided to have the maximal radiance), the BRDF of the surface of the target is assumed to be 90\% Lambertian and 10\% Glossy while in the worst case the BRDF will be only Lambertian. In this way, the radiance of the target $R_T$ is

\begin{equation}
\label{eq:Radiance Target}
R_T = \left\{
	\begin{array}{ll}
		\frac{F_{50}\alpha}{\pi}\cos \theta & \mbox{ optimal case} \\
		F_{50}\alpha(\frac{9}{10\pi}\cos\theta + \frac{1}{10}) & \mbox{ worst case}
	\end{array}
\right.
\end{equation}

with 
\begin{align*}
	\alpha & \in [0.05, 0.45]\mbox{, the albedo of the target\ref{albedo}} \\
	\theta & \in [10, 50]\mbox{\textdegree, the angle between the target's normal and the sun's beam}
\end{align*}
Thus, 
\begin{equation}
\label{eq:Radiance Target Range}
R_T \in [1.44, 58.58] \ W/m^2
\end{equation}





\subsubsection{Target's Irradiance}
\label{Target's Irradiance}
~\\
Now, the irradiance of the target $I_T$ can be calculated with

\begin{equation}
\label{eq:Irradiance Target}
I_T = R_T\frac{\pi}{4}\left(\frac{Dsr}{EFL}\right)^2\cos (\alpha_{CT})^4
\end{equation}

with
\begin{align*}
\alpha_{CT} & \mbox{ the angle between the normal of the target and the axis of the camera} \\
Dsr & \mbox{ the effective lens entrance aperture} \\
EFL & \mbox{ the focal length}
\end{align*}

However, knowing that the camera is supposed to be right in front of the target, we have

\begin{equation*}
\alpha_{CT} = 0
\end{equation*}

And according to \eqref{eq:Irradiance Target}, \eqref{eq:Radiance Target Range}, \ref{aperture} and \ref{focalLength}, we have

\begin{equation}
\label{eq:Irradiance Target Range}
I_T \in [0.0271, 1.1000] \ W/m^2
\end{equation}

Finally, the luminous power from the target to the camera per pixel $W_{lum}$ is 

\begin{equation}
\label{eq:Luminous Power}
W_{lum} = I_TP_s
\end{equation}
with
\begin{equation*}
P_s = 12.10^{-6}\times 12.10^{-6}\ m^2\mbox{, the pixel size of the CCD}
\end{equation*}

According to \eqref{eq:Irradiance Target Range}

\begin{equation}
\label{eq:Luminous Power Range}
W_{lum} \in [3.900, 158.40].10^{-10} \ W/pixel
\end{equation}





\subsubsection{Light Source Irradiance}
~\\
Now, the luminous power of the light toward the CCD from the light source reflected by the target $W_{LED}$ needs to be determined. First, the luminous power of each point $W_{dot}$ projected by the source is

\begin{equation}
\label{eq:powerpoint}
W_{dot} = \frac{LFLLed.LFGLed.P_{LED}}{N_{point}} = 4,4960.10^{-04}\ W
\end{equation}

with

\begin{align*}
N_{points} & = 10\times 10 = 100\ points\mbox{, the number of points projected on the  target}\\
P_{LED} & = \frac{C_{LED}\Omega}{L_e} = 0.2997\ W\mbox{, the power of the LED}\\
C_{LED} & = 84\ cd\mbox{, the power of the LED in candella (Annex \ref{LEDdatasheet})}\\
\Omega & = 2\pi (1-\cos \alpha) = 0.2141\ sr\mbox{, the solid angle of the LED (Annex \ref{LEDdatasheet})}\\
L_e & = 60\mbox{, the luminous efficiency of the LED}
\end{align*}

Then, the irradiance of a light point $E_{point}$ is
\begin{equation}
E_{point} = \frac{W_{dot}}{A_{point}} = 71.5558\ W/m^2
\end{equation}

with $A_{point} = 6,2832.10^{-6}$ $m^2$, the surface of a point.

Finally, $W_{LED}$ can be calculated calculated following the same steps as in the previous part \ref{Target's Irradiance} except the fact that we have to consider an angle $\theta_{Led} = 10$\textdegree between the light source and the normal of the target. Thus, the luminous power per pixel received by the CCD from the source light is $W_{LED} = [3.033, 33.271].10^{-12}\ W/pixel$.






\subsubsection{Signal/Noise Ratio}
~\\
Three different cases will be studied. In the first one, we examine the case of a target iluminated by the sun without the use of laser, the second one considers the use of lasers by night and the last one, which is the case that we need to consider for our rover, study the use of lasers by daylight.
In order to calculate the Signal/Noise ratio, the different noises need to be determined. Three will be taken into account: the readout noise, the dark current noise and the noise from the sun light. 

The three different cases have the readout and the dark current noise in common which are given by the datasheet of the CCD \ref{CCDdatasheet}.

\begin{align}
\delta_{readout} & = \frac{RMS}{N_{pixel}} \\
& = 2,3842.10^{-05} \ el/pixel \label{eq:readout} \\
\delta_{dark} & = \left(2,55.10^{15}N_{dc0}T_s(P_s.10^2)^2T^{\frac{2}{3}}e^{-\frac{E_g}{2kT}}\right)^{\frac{1}{2}} \\
& = 0.0067 \ el/pixel \label{eq:darkcurrent}
\end{align}

with
\begin{align*}
RMS & = 25\ el\mbox{, the RMS readout noise \ref{CCDdatasheet}}\\
N_{pixel} & = 1024\times 1024 \ pixels\mbox{, the number of pixel of the CCD\ref{CCDdatasheet}}\\
N_{dc0} & = 30\ pA/cm^2\mbox{, the dark current level at 20\textdegree C \ref{CCDdatasheet}}\\
T_s & = 0.1\ s\mbox{, the shutter time}\\
P_s & = 12.10^{-6}\ m\mbox{, the  pixel size \ref{CCDdatasheet}}\\
T & = 197\ K\mbox{, the temperature}\\
E_g & = 1.1557-\frac{7.10^{-4}T^2}{1108+T}\\
k & = 8,62.10^{-5}\ eV/K\mbox{, the Boltzmann's constant}
\end{align*}


\paragraph*{First case}
\label{first case}
~~\\
In this case, the signal that needs to be considered is the sun light reflected by the target. Therefore, the readout and the dark current noises are the only two which need to be considered and the noise is

\begin{equation}
\label{eq:Noise case1}
N = \sqrt{\delta_{readout}^2+\delta_{dark}^2} = 0.0067\ el/pixel
\end{equation}

Then, the number of photons per shutter time $N_p$ corresponding o the radiance of the target is

\begin{equation}
\label{eq:Number Photons per Shutter Time case1}
N_p = \frac{1}{\lambda_{max}-\lambda_{min}}\int_{\lambda_{min}}^{\lambda_{max}} \frac{W_{lum}ts}{\frac{h.c}{\lambda}} \, \mathrm d\lambda \in [1.177, 47.810].10^{6} \ photons/pixel
\end{equation}

with

\begin{align*}
ts & = 0.1\ s \mbox{, shutter time}  \\
h & = 6,6263.10^-34 \ J.s \mbox{, Planck's constant}  \\
c & = 3.10^8 \ m/s \mbox{, velocity of light} \\
\lambda & \in [400, 800] \ nm \mbox{, wavelength of the sunlight}
\end{align*}

The number of photons per pixel going to the lens $N_{CCD}$ is

\begin{equation}
\label{eq:Number Photons case1}
N_{CCD}=\frac{\pi\left(\frac{Dsr}{2}\right)^2}{2\pi(r)^2}N_p \in [0.1328, 5.3936] \ photons/pixel
\end{equation}

with $r = 2\ m$, the distance between the camera and the target

The number of photons per pixel to the lens registered by the CCD $Nen_{CCD}$ is

\begin{equation}
\label{eq:Number Photons CCD case1}
Nen_{CCD}= N_{CCD}\int_{\lambda_{min}}^{\lambda_{max}}CCDqe(\lambda).alphaLens(\lambda) \, \mathrm d\lambda \in [0.0208, 0.8457] \ photons/pixel
\end{equation}

with

\begin{align*}
CCDqe & \mbox{, the quantum efficiency of the CCD \ref{fig:QeCCD}}\\
alphaLens & \mbox{, the pass band efficiency of the lens}
\end{align*}

Finally, according to \eqref{eq:Noise case1} and \eqref{eq:Number Photons CCD case1} we obtain the Signal/Noise ratio 

\begin{equation}
\label{eq:Signal Noise Ratio case1}
\frac{S}{N} = \frac{Nen_{CCD}}{N} = [3.1, 126.8]
\end{equation}

Knowing that, 100 is a really great Signal/Noise ratio, we can conclude that the system could record images of satisfactory or high quality the most of the time. However, if the different poor conditions accumulate, the quality of the image will greatly decrease.

\paragraph*{Second case}
~~\\
In this case, the signal that needs to be considered is the light of the pseudo laser reflected by the target. Therefore, the noise is still the same as in the first case.
Proceeding in the same way as into the first case \ref{first case} but considering only the wave length of the LED($520.10^{-9}\ m$), the number of photons per pixel from the artificial light source going toward the CCD is $Nen_{LED} = [2.4556, 26.9410]\ photon/pixel$.

And the Signal/Noise ratio is given by

\begin{equation}
\label{eq:Signal Noise Ratio case2}
\frac{S}{N} = \frac{Nen_{LED}}{N} = [368, 4040]
\end{equation}

It can be deduced from this $SNR$ that the system light source plus camera would work perfectly by night. Indeed, the minimum of this ratio is $368$ which is larger than $100$
, an excellent ratio. Working by night would be the best scenario but the day work needs to be considered.


\paragraph*{Third case} \label{thirdcase}
~~\\
In this case, the current case, it will determined if the artificial light source is powerful enough to outshine the sunlight. Thus, the sunlight is now considered as a noise, the shot noise. 
\begin{equation}
\label{eq:Noise case3}
N = \sqrt{\delta_{readout}^2+\delta_{dark}^2+\delta_{shot}^2} = [0.0219, 0.8457]\ el/pixel \qquad with\ \delta_{shot} = nenCCD
\end{equation}


As the signal and the noise are ranges because of the different conditions possible, the SNR should be 
\begin{equation*}
SNR = \left[\frac{S_{min}}{N_{max}}, \frac{S_{max}}{N_{min}}\right] \qquad with\ S=Nen_{LED}
\end{equation*}

However, it can be noticed that one parameter, the albedo $\alpha$, is varying for both lights, the sun and the artificial light source. Indeed, if the target has an albedo $\alpha_{min}$, this albedo needs to be considered in both calculation of the $Nen_{CCD}$ and $Nen_{LED}$. Therefore, the calculation of the $SNR$ needs to take into account this correlation and we have

\begin{equation}
SNR = [32, 348]
\end{equation}

It can be concluded that the artificial light system is powerful enough to outshine the sunlight. Moreover, the quality of the image of the points should have an excellent quality, which would permit the 3D mapping algorithm to work perfectly. Also, even if the worst conditions are gathered (minimum albedo, sunset), the $SNR$ is still equal to 32, which is acceptable.


